<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Produce Procurement | Karibu Groceries</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Main System Styles -->
    <link rel="stylesheet" href="../css/main.css" />
  </head>
  <body>
    <!-- TOP NAVIGATION-->
    <nav class="top-nav">
      <div class="container">
        <a href="../dashboard.html" class="nav-brand">
          Karibu <span>Groceries</span>
        </a>

        <div class="nav-links d-none d-md-flex">
          <a href="../dashboard.html" class="nav-link">Dashboard</a>
          <a href="./stock.html" class="nav-link">Stock</a>
          <a href="./procurement.html" class="nav-link active">Procurement</a>
          <a href="./sales-history.html" class="nav-link">Sales</a>
        </div>

        <div class="nav-actions">
          <button id="logoutBtn" class="btn btn-outline-secondary btn-sm">
            Logout
          </button>
        </div>
      </div>
    </nav>

    <!-- PAGE HEADER-->
    <header class="dashboard-header">
      <div class="container">
        <h4 class="mb-1 fw-bold">Produce Procurement</h4>
        <p class="page-subtitle mb-0">
          Record newly received produce into branch stock
        </p>
      </div>
    </header>

    <!-- MAIN CONTENT-->
    <main class="container py-5">
      <div class="row justify-content-center">
        <div class="col-lg-10 col-xl-8">
          <div class="card">
            <div class="card-body">
              <h4 class="fw-bold text-center mb-4">New Produce Delivery</h4>

              <form id="procurementForm" novalidate>
                <!-- PRODUCE DETAILS -->
                <h4 class="section-title">Produce Details</h4>
                <p class="page-subtitle mb-3">
                  Identify the produce and its source.
                </p>

                <div class="row g-3 mb-4">
                  <div class="col-md-6">
                    <div class="form-floating">
                      <input
                        type="text"
                        class="form-control"
                        id="produceName"
                        placeholder="Maize"
                        required
                      />
                      <label>Produce Name</label>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-floating">
                      <input
                        type="text"
                        class="form-control"
                        id="produceType"
                        placeholder="Yellow Maize"
                        required
                      />
                      <label>Produce Variety / Type</label>
                    </div>
                  </div>

                  <div class="col-12">
                    <div class="form-floating">
                      <select class="form-select" id="sourceType" required>
                        <option value="" disabled selected>
                          Select source
                        </option>
                        <option value="individual">Individual Dealer</option>
                        <option value="company">Company Supplier</option>
                        <option value="farm">Karibu Groceries Farm</option>
                      </select>
                      <label>Source of Produce</label>
                    </div>
                  </div>
                </div>

                <!-- DELIVERY -->
                <h4 class="section-title">Delivery Information</h4>
                <p class="page-subtitle mb-3">
                  When and how much was received.
                </p>

                <div class="row g-3 mb-4">
                  <div class="col-md-4">
                    <label class="form-label small">Delivery Date</label>
                    <input
                      type="date"
                      class="form-control"
                      id="date"
                      required
                    />
                  </div>

                  <div class="col-md-4">
                    <label class="form-label small">Delivery Time</label>
                    <input
                      type="time"
                      class="form-control"
                      id="time"
                      required
                    />
                  </div>

                  <div class="col-md-4">
                    <label class="form-label small">Quantity (KG)</label>
                    <input
                      type="number"
                      class="form-control"
                      id="tonnage"
                      min="1000"
                      placeholder="Min 1000 KG"
                      required
                    />
                  </div>
                </div>

                <!-- SUPPLIER -->
                <h4 class="section-title">Supplier Details</h4>
                <p class="page-subtitle mb-3">
                  For traceability and follow-up.
                </p>

                <div class="row g-3 mb-4">
                  <div class="col-md-6">
                    <div class="form-floating">
                      <input
                        type="text"
                        class="form-control"
                        id="dealerName"
                        placeholder="Supplier Name"
                        required
                      />
                      <label>Supplier / Dealer Name</label>
                    </div>
                  </div>

                  <div class="col-md-6">
                    <div class="form-floating">
                      <input
                        type="tel"
                        class="form-control"
                        id="dealerContact"
                        placeholder="07XXXXXXXX"
                        required
                      />
                      <label>Supplier Contact</label>
                    </div>
                  </div>
                </div>

                <!-- STOCK & PRICING -->
                <h4 class="section-title">Stock Allocation & Pricing</h4>
                <p class="page-subtitle mb-3">Branch assignment and pricing.</p>

                <div class="row g-3 mb-4">
                  <div class="col-md-4">
                    <div class="form-floating">
                      <select class="form-select" id="branch" required>
                        <option value="" disabled selected>
                          Select branch
                        </option>
                        <option value="maganjo">Maganjo</option>
                        <option value="matugga">Matugga</option>
                      </select>
                      <label>Receiving Branch</label>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-floating">
                      <input
                        type="number"
                        class="form-control"
                        id="cost"
                        min="10000"
                        placeholder="Total cost"
                        required
                      />
                      <label>Total Cost (UGX)</label>
                    </div>
                  </div>

                  <div class="col-md-4">
                    <div class="form-floating">
                      <input
                        type="number"
                        class="form-control"
                        id="sellingPrice"
                        min="100"
                        placeholder="Price per KG"
                        required
                      />
                      <label>Selling Price / KG (UGX)</label>
                    </div>
                  </div>
                </div>

                <!-- ACTION -->
                <div class="d-grid mt-4">
                  <button type="submit" class="btn btn-primary btn-lg">
                    Save Procurement Record
                  </button>
                </div>

                <p class="page-subtitle text-center mt-3">
                  Stock updates immediately after saving.
                </p>
              </form>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- SCRIPTS -->
    <script src="../js/auth.js"></script>
    <script src="../js/manager/procurement.js"></script>

    <script>
      // Auto-fill date & time
      const now = new Date();
      document.getElementById("date").value = now.toISOString().split("T")[0];
      document.getElementById("time").value = now.toTimeString().slice(0, 5);

      // Logout
      document.getElementById("logoutBtn").addEventListener("click", () => {
        if (confirm("Logout from Karibu Groceries?")) {
          localStorage.removeItem("kglUser");
          window.location.href = "../index.html";
        }
      });
    </script>
  </body>
</html>
